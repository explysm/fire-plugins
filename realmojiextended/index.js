(function(u,f,l){"use strict";const a=[],{getCustomEmojiById:y}=f.findByStoreName("EmojiStore"),d=f.findByName("RowManager"),s=/https:\/\/cdn.discordapp.com\/emojis\/(\d+)\.\w+/;a.push(l.before("generate",d.prototype,function([n]){if(n.rowType!==1)return;let e=n.message.content;if(!e?.length)return;const o=e.match(s)?.index;if(o===void 0)return;const i=e.slice(o).trim().split(`
`);if(!i.every(function(r){return r.match(s)}))return;for(e=e.slice(0,o);e.indexOf("  ")!==-1;)e=e.replace("  ",` ${i.shift()} `);e=e.trim(),i.length&&(e+=` ${i.join(" ")}`);const t=n.message.embeds;for(let r=0;r<t.length;r++){const c=t[r];c.type==="image"&&c.url.match(s)&&t.splice(r--,1)}n.message.content=e,n.__realmoji=!0})),a.push(l.after("generate",d.prototype,function([n],e){if(n.rowType!==1||n.__realmoji!==!0)return;const{content:o}=e.message;if(!Array.isArray(o))return;const i=o.every(function(t){return t.type==="link"&&t.target.match(s)||t.type==="text"&&t.content===" "});for(let t=0;t<o.length;t++){const r=o[t];if(r.type!=="link")continue;const c=r.target.match(s);if(!c)continue;const m=c[1],p=y(m),j=p?.animated??c[0].includes(".gif"),g=`https://cdn.discordapp.com/emojis/${m}.webp?size=128`;o[t]={type:"customEmoji",id:m,alt:p?.name??"<realmoji>",src:g,frozenSrc:g,animated:j,jumboable:i?!0:void 0}}}));const h=function(){return a.forEach(function(n){return n()})};return u.onUnload=h,u})({},vendetta.metro,vendetta.patcher);
